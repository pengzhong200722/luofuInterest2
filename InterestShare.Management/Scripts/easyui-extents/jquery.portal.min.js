(function(n){function r(r){var f;n(r).addClass("portal");var o=n('<table border="0" cellspacing="0" cellpadding="0"><tr><\/tr><\/table>').appendTo(r),s=o.find("tr"),u=[],e=0;for(n(r).children("div:first").addClass("portal-column-left"),n(r).children("div:last").addClass("portal-column-right"),n(r).find(">div").each(function(){var t=n(this),f;e+=t.outerWidth();u.push(t.outerWidth());f=n('<td class="portal-column-td"><\/td>').appendTo(s);t.addClass("portal-column").appendTo(f);t.find(">div").each(function(){var t=n(this).addClass("portal-p").panel({doSize:!1,cls:"portal-panel"});i(r,t)})}),f=0;f<u.length;f++)u[f]/=e;return n(r).bind("_resize",function(){var i=n.data(r,"portal").options;return i.fit==!0&&t(r),!1}),u}function t(t){var r=n(t),i=n.data(t,"portal").options,f,u,o;i.fit&&(u=r.parent(),i.width=u.width(),i.height=u.height());isNaN(i.width)?r.width("auto"):r._outerWidth(i.width);isNaN(i.height)?r.height("auto"):r._outerHeight(i.height);var c=r.find(">table").outerHeight()>r.height(),s=r.width(),e=n.data(t,"portal").columnWidths,h=0;for(f=0;f<e.length;f++)u=r.find("div.portal-column:eq("+f+")"),o=Math.floor(s*e[f]),f==e.length-1&&(o=s-h-(c==!0?18:0)),u._outerWidth(o),h+=u.outerWidth(),u.find("div.portal-p").panel("resize",{width:u.width()});i.onResize.call(t,i.width,i.height)}function i(i,r){function e(t,r){var u=null;return n(i).find("div.portal-p").each(function(){var i=n(this).panel("panel"),f;i[0]!=r&&(f=i.offset(),t.pageX>f.left&&t.pageX<f.left+i.outerWidth()&&t.pageY>f.top&&t.pageY<f.top+i.outerHeight()&&(u=t.pageY>f.top+i.outerHeight()/2?{target:i,pos:"down"}:{target:i,pos:"up"}))}),u}function o(t){var r=null;return n(i).find("div.portal-column").each(function(){var i=n(this),u=i.offset();t.pageX>u.left&&t.pageX<u.left+i.outerWidth()&&(r=i)}),r}function f(n,t){u._outerWidth(n);t&&u._outerHeight(t)}var u;r.panel("panel").draggable({handle:">div.panel-header>div.panel-title",proxy:function(t){var i=n('<div class="portal-proxy">proxy<\/div>').insertAfter(t);return i.width(n(t).width()),i.height(n(t).height()),i.html(n(t).html()),i.find("div.portal-p").removeClass("portal-p"),i},onBeforeDrag:function(t){t.data.startTop=n(this).position().top+n(i).scrollTop()},onStartDrag:function(){n(this).hide();u=n('<div class="portal-spacer"><\/div>').insertAfter(this);f(n(this).outerWidth(),n(this).outerHeight())},onDrag:function(r){var s=e(r,this),h;s?(s.pos=="up"?u.insertBefore(s.target):u.insertAfter(s.target),f(n(s.target).outerWidth())):(h=o(r),h&&h.find("div.portal-spacer").length==0&&(u.appendTo(h),t(i),f(h.width())))},onStopDrag:function(){n(this).css("position","static");n(this).show();u.hide();n(this).insertAfter(u);u.remove();t(i);r.panel("move");var f=n.data(i,"portal").options;f.onStateChange.call(i)}})}n.fn.portal=function(i,u){return typeof i=="string"?n.fn.portal.methods[i](this,u):(i=i||{},this.each(function(){var u=n.data(this,"portal");u?n.extend(u.options,i):u=n.data(this,"portal",{options:n.extend({},n.fn.portal.defaults,n.fn.portal.parseOptions(this),i),columnWidths:r(this)});u.options.border?n(this).removeClass("portal-noborder"):n(this).addClass("portal-noborder");t(this)}))};n.fn.portal.methods={options:function(t){return n.data(t[0],"portal").options},resize:function(i,r){return i.each(function(){if(r){var i=n.data(this,"portal").options;r.width&&(i.width=r.width);r.height&&(i.height=r.height)}t(this)})},getPanels:function(t,i){var u=t,r;return i>=0&&(u=t.find("div.portal-column:eq("+i+")")),r=[],u.find("div.portal-p").each(function(){r.push(n(this))}),r},add:function(t,r){return t.each(function(){var u=n(this).find("div.portal-column:eq("+r.columnIndex+")"),t=r.panel.addClass("portal-p");t.panel("panel").addClass("portal-panel").appendTo(u);i(this,t);t.panel("resize",{width:u.width()})})},remove:function(t,i){return t.each(function(){for(var r,u=n(this).portal("getPanels"),t=0;t<u.length;t++)r=u[t],r[0]==n(i)[0]&&r.panel("destroy")})},disableDragging:function(n,t){return t.panel("panel").draggable("disable"),n},enableDragging:function(n,t){return t.panel("panel").draggable("enable"),n}};n.fn.portal.parseOptions=function(t){var i=n(t);return{width:parseInt(t.style.width)||undefined,height:parseInt(t.style.height)||undefined,border:i.attr("border")?i.attr("border")=="true":undefined,fit:i.attr("fit")?i.attr("fit")=="true":undefined}};n.fn.portal.defaults={width:"auto",height:"auto",border:!0,fit:!1,onResize:function(){},onStateChange:function(){}}})(jQuery);
/*
//# sourceMappingURL=jquery.portal.min.js.map
*/